# This ConfigMap is used to configure a self-hosted Contiv installation.
# It can be used with an external cluster store(etcd or consul) or used
# with the etcd instance being installed as contiv-etcd
kind: ConfigMap
apiVersion: v1
metadata:
  name: contiv-config
  namespace: kube-system
data:
  contiv_mode: kubernetes
  contiv_fwdmode: {{ contiv_fw_mode }}
  contiv_netmode: {{ contiv_net_mode }}
  contiv_cluster_store: "http://127.0.0.1:6666"
  contiv_cni_config: |-
    {
      "cniVersion": "{{ contiv_cni_version }}",
      "name": "contiv-net",
      "type": "contivk8s"
    }
  contiv_k8s_config: |-
    {
       "K8S_API_SERVER": "{{ kube_apiserver_endpoint }}",
       "K8S_CA": "/var/run/secrets/kubernetes.io/serviceaccount/ca.crt",
       "K8S_KEY": "",
       "K8S_CERT": "",
       "K8S_TOKEN": "",
       "SVC_SUBNET": "{{ kube_service_addresses }}"
    }
